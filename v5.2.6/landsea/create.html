<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Loading LandSea Datasets · GeoRegions.jl</title><meta name="title" content="Loading LandSea Datasets · GeoRegions.jl"/><meta property="og:title" content="Loading LandSea Datasets · GeoRegions.jl"/><meta property="twitter:title" content="Loading LandSea Datasets · GeoRegions.jl"/><meta name="description" content="Documentation for GeoRegions.jl."/><meta property="og:description" content="Documentation for GeoRegions.jl."/><meta property="twitter:description" content="Documentation for GeoRegions.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../index.html"><img src="../assets/logo.png" alt="GeoRegions.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../index.html">GeoRegions.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../index.html">Home</a></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox"/><label class="tocitem" for="menuitem-2"><span class="docs-label">What is a GeoRegion: An Overview</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../georegions/intro.html">What is a GeoRegion?</a></li><li><a class="tocitem" href="../georegions/create.html">Creating GeoRegions</a></li><li><a class="tocitem" href="../georegions/predefined.html">Predefined GeoRegions</a></li><li><a class="tocitem" href="../georegions/read.html">Retrieving GeoRegions</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">What is a RegionGrid: An Overview</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../regiongrids/intro.html">What is a RegionGrid?</a></li><li><a class="tocitem" href="../regiongrids/create.html">Creating RegionGrids</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">Using GeoRegions.jl: A Tutorial</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../using/isin.html">Is it in a GeoRegion?</a></li><li><a class="tocitem" href="../using/custom.html">Custom GeoRegions</a></li><li><a class="tocitem" href="../using/extract.html">Data Extraction via RegionGrids</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox" checked/><label class="tocitem" for="menuitem-5"><span class="docs-label">LandSea Datasets: ETOPO 2022</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="intro.html">What is a LandSea Dataset?</a></li><li class="is-active"><a class="tocitem" href="create.html">Loading LandSea Datasets</a><ul class="internal"><li><a class="tocitem" href="#Retrieving-LandSea-Example-over-Aceh"><span>Retrieving LandSea Example over Aceh</span></a></li><li><a class="tocitem" href="#API"><span>API</span></a></li></ul></li><li><a class="tocitem" href="smooth.html">Smoothing LandSea Masks</a></li></ul></li><li><a class="tocitem" href="../example/placeholder.html">Examples</a></li><li><input class="collapse-toggle" id="menuitem-7" type="checkbox"/><label class="tocitem" for="menuitem-7"><span class="docs-label">Lists of GeoRegions</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../lists/api.html">API</a></li><li><a class="tocitem" href="../lists/default.html">Default</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">LandSea Datasets: ETOPO 2022</a></li><li class="is-active"><a href="create.html">Loading LandSea Datasets</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="create.html">Loading LandSea Datasets</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaClimate/GeoRegions.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaClimate/GeoRegions.jl/blob/main/docs/src/landsea/create.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Loading-and-Saving-Land-Sea-Mask-Datasets"><a class="docs-heading-anchor" href="#Loading-and-Saving-Land-Sea-Mask-Datasets">Loading and Saving Land-Sea Mask Datasets</a><a id="Loading-and-Saving-Land-Sea-Mask-Datasets-1"></a><a class="docs-heading-anchor-permalink" href="#Loading-and-Saving-Land-Sea-Mask-Datasets" title="Permalink"></a></h1><p>The Land-Sea Dataset can be obtained using the function <code>getLandSea()</code>.  There are two options:</p><ol><li>Saving the <code>LandSea</code> dataset as a local NetCDF file</li><li>Extract the <code>LandSea</code> dataset directly from the OPeNDAP servers</li></ol><p>Option (1) has a longer initial cost, because you have to download the global file, and then use the data from the global file to extract out the information for the GeoRegion of interest.  However, once the data has been downloaded once, you don&#39;t need to download the data again and this greatly speeds up latency time.</p><p>Option (2) however, is much faster for smaller GeoRegions when loading the data directly from OPeNDAP is much easier than downloading the entire dataset.  However, loading data directly from OPeNDAP comes with its own noticeable latency, which can add up if done iteratively.</p><p>You can toggle between the two options using the keyword argument <code>savelsd</code> - <code>true</code> sets the function to option 1, and <code>false</code> is option 2.</p><p>See end of the page for the API.</p><p>For more details on <em>smoothing</em> the land-sea mask, such that distance from the actual coastline is better resolved, please see <a href="smooth.html">this page</a></p><h3 id="Setup"><a class="docs-heading-anchor" href="#Setup">Setup</a><a id="Setup-1"></a><a class="docs-heading-anchor-permalink" href="#Setup" title="Permalink"></a></h3><pre><code class="language-julia hljs">using GeoRegions
using DelimitedFiles
using CairoMakie

download(&quot;https://raw.githubusercontent.com/natgeo-wong/GeoPlottingData/main/coastline_resl.txt&quot;,&quot;coast.cst&quot;)
coast = readdlm(&quot;coast.cst&quot;,comments=true)
clon  = coast[:,1]
clat  = coast[:,2]
nothing</code></pre><h2 id="Retrieving-LandSea-Example-over-Aceh"><a class="docs-heading-anchor" href="#Retrieving-LandSea-Example-over-Aceh">Retrieving LandSea Example over Aceh</a><a id="Retrieving-LandSea-Example-over-Aceh-1"></a><a class="docs-heading-anchor-permalink" href="#Retrieving-LandSea-Example-over-Aceh" title="Permalink"></a></h2><pre><code class="language-julia hljs">geo  = RectRegion(&quot;ACH&quot;,&quot;GLB&quot;,&quot;Aceh&quot;,[6,3,98,95],savegeo=false)
slon,slat = coordGeoRegion(geo)
lsd = getLandSea(geo,savelsd=false)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">The Land-Sea Dataset (with Topography) has the following properties:
    Longitude Points    (lon) : Float32[95.00833, 95.025, 95.041664, 95.058334, 95.075, 95.09167, 95.10833, 95.125, 95.14167, 95.15833  …  97.84167, 97.85833, 97.875, 97.89167, 97.90833, 97.925, 97.941666, 97.958336, 97.975, 97.99167]
    Latitude Points     (lat) : Float32[3.0083334, 3.025, 3.0416667, 3.0583334, 3.075, 3.0916667, 3.1083333, 3.125, 3.1416667, 3.1583333  …  5.8416667, 5.858333, 5.875, 5.891667, 5.9083333, 5.925, 5.9416666, 5.9583335, 5.975, 5.991667]
    Region Size (nlon * nlat) : 180 lon points x 180 lat points
</code></pre><p>And we plot it here, with coarser-resolution coastlines for comparison:</p><pre><code class="language-julia hljs">fig = Figure()
aspect = (maximum(slon)-minimum(slon))/(maximum(slat)-minimum(slat))

ax1 = Axis(
    fig[1,1],width=350,height=350/aspect,
    title=&quot;Orographic Height&quot;,xlabel=&quot;Longitude / º&quot;,ylabel=&quot;Latitude / º&quot;,
    limits=(minimum(slon)-0.1,maximum(slon)+0.1,minimum(slat)-0.1,maximum(slat)+0.1)
)
contourf!(
    ax1,lsd.lon,lsd.lat,lsd.z,
    levels=range(0,1500,length=16),extendlow=:auto,extendhigh=:auto
)
lines!(ax1,clon,clat,color=:black,linewidth=2)
lines!(ax1,slon,slat,linewidth=5)

ax2 = Axis(
    fig[1,2],width=350,height=350/aspect,
    title=&quot;Land-Sea Mask&quot;,xlabel=&quot;Longitude / º&quot;,
    limits=(minimum(slon)-0.1,maximum(slon)+0.1,minimum(slat)-0.1,maximum(slat)+0.1)
)
contourf!(
    ax2,lsd.lon,lsd.lat,lsd.lsm,
    levels=range(0.05,0.95,length=19),extendlow=:auto,extendhigh=:auto
)
lines!(ax2,slon,slat,linewidth=5)

resize_to_layout!(fig)
fig</code></pre><img src="create-8c7cf310.svg" alt="Example block output"/><h2 id="API"><a class="docs-heading-anchor" href="#API">API</a><a id="API-1"></a><a class="docs-heading-anchor-permalink" href="#API" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GeoRegions.getLandSea" href="#GeoRegions.getLandSea"><code>GeoRegions.getLandSea</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">getLandSea(
    geo  :: GeoRegion = GeoRegion(&quot;GLB&quot;);
    path :: AbstractString = homedir(),
    resolution :: Int = 60,
    bedrock   :: Bool = false,
    geoid     :: Bool = false,
    returnlsd :: Bool = false,
    savelsd   :: Bool = false,
    smooth    :: Bool = false,
    σlon :: Int = 0,
    σlat :: Int = 0,
    iterations :: Int = 100,
    FT = Float32
) -&gt; LandSea</code></pre><p>Retrieve ETOPO 2022 data for a GeoRegion from OPeNDAP servers</p><p><strong>Arguments</strong></p><ul><li><code>geo</code> : The GeoRegion of interest</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>path</code> :: The path to which an <code>ETOPO</code> folder is created within and ETOPO LandSea data saved into</li><li><code>resolution</code> : The resolution of the dataset to be downloaded, in units of arc-seconds.  Possible values are 15, 30 and 60, default is 60.</li><li><code>bedrock</code>, <code>geoid</code> : The type of ETOPO data (bedrock, geoid, ice-surface) to be downloaded. Bedrock has priority over geoid, so if both are <code>true</code>, the bedrock is downloaded.</li><li><code>savelsd</code> : Save LandSea dataset into a local NetCDF file.</li><li><code>returnlsd</code> : If <code>savelsd = true</code>, you can choose to simply save the data into the NetCDF file, or load return it as a <code>LandSea</code> dataset. Otherwise, if <code>savelsd = false</code>, you always return the <code>LandSea</code> dataset.</li><li><code>smooth</code> : If <code>smooth = true</code>, then you can smooth the land-sea mask using the Gaussian Filter of ImageFiltering.jl such that the coastline (i.e. the separation between land and ocean) becomes blurred.</li><li><code>σlon</code> : Smooth in the longitude direction (every increase of 1 in σlon roughly corresponds to 8 pixels)</li><li><code>σlat</code> : Smooth in the latitude direction (every increase of 1 in σlat roughly corresponds to 8 pixels)</li><li><code>iterations</code> : Iterations of gausssian smoothing, the higher, the closer the smoothing follows a semi-log.  50-100 iterations is generally enough.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/GeoRegions.jl/blob/388a7962345bfe29e6c4f723f2c068ed0b8d4c41/src/landsea/landsea.jl#L1-L34">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="intro.html">« What is a LandSea Dataset?</a><a class="docs-footer-nextpage" href="smooth.html">Smoothing LandSea Masks »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.1.2 on <span class="colophon-date" title="Wednesday 22 November 2023 08:10">Wednesday 22 November 2023</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
