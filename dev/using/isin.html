<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Is it in a GeoRegion? · GeoRegions.jl</title><meta name="title" content="Is it in a GeoRegion? · GeoRegions.jl"/><meta property="og:title" content="Is it in a GeoRegion? · GeoRegions.jl"/><meta property="twitter:title" content="Is it in a GeoRegion? · GeoRegions.jl"/><meta name="description" content="Documentation for GeoRegions.jl."/><meta property="og:description" content="Documentation for GeoRegions.jl."/><meta property="twitter:description" content="Documentation for GeoRegions.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../index.html"><img src="../assets/logo.png" alt="GeoRegions.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../index.html">GeoRegions.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../index.html">Home</a></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox"/><label class="tocitem" for="menuitem-2"><span class="docs-label">What is a GeoRegion: An Overview</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../georegions/intro.html">What is a GeoRegion?</a></li><li><a class="tocitem" href="../georegions/create.html">Creating GeoRegions</a></li><li><a class="tocitem" href="../georegions/predefined.html">Predefined GeoRegions</a></li><li><a class="tocitem" href="../georegions/read.html">Retrieving GeoRegions</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">What is a RegionGrid: An Overview</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../regiongrids/intro.html">What is a RegionGrid?</a></li><li><a class="tocitem" href="../regiongrids/create.html">Creating RegionGrids</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox" checked/><label class="tocitem" for="menuitem-4"><span class="docs-label">Using GeoRegions.jl: A Tutorial</span><i class="docs-chevron"></i></label><ul class="collapsed"><li class="is-active"><a class="tocitem" href="isin.html">Is it in a GeoRegion?</a><ul class="internal"><li><a class="tocitem" href="#Is-a-Point-in-a-GeoRegion?"><span>Is a Point in a GeoRegion?</span></a></li><li><a class="tocitem" href="#Is-a-GeoRegion-inside-a-GeoRegion?"><span>Is a GeoRegion inside a GeoRegion?</span></a></li><li><a class="tocitem" href="#API"><span>API</span></a></li></ul></li><li><a class="tocitem" href="custom.html">Custom GeoRegions</a></li><li><a class="tocitem" href="extract.html">Data Extraction via RegionGrids</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox"/><label class="tocitem" for="menuitem-5"><span class="docs-label">LandSea Datasets: ETOPO 2022</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../landsea/intro.html">What is a LandSea Dataset?</a></li><li><a class="tocitem" href="../landsea/create.html">Loading LandSea Datasets</a></li><li><a class="tocitem" href="../landsea/smooth.html">Smoothing LandSea Masks</a></li></ul></li><li><a class="tocitem" href="../example/placeholder.html">Examples</a></li><li><input class="collapse-toggle" id="menuitem-7" type="checkbox"/><label class="tocitem" for="menuitem-7"><span class="docs-label">Lists of GeoRegions</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../lists/api.html">API</a></li><li><a class="tocitem" href="../lists/default.html">Default</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Using GeoRegions.jl: A Tutorial</a></li><li class="is-active"><a href="isin.html">Is it in a GeoRegion?</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="isin.html">Is it in a GeoRegion?</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaClimate/GeoRegions.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaClimate/GeoRegions.jl/blob/main/docs/literate/using/isin.jl" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Is-it-in-a-GeoRegion?"><a class="docs-heading-anchor" href="#Is-it-in-a-GeoRegion?">Is it in a GeoRegion?</a><a id="Is-it-in-a-GeoRegion?-1"></a><a class="docs-heading-anchor-permalink" href="#Is-it-in-a-GeoRegion?" title="Permalink"></a></h1><p>When dealing with geographic data, we often wish to check if a point or region is inside another region.  GeoRegions.jl allows you to perform this check easily with the function <code>isinGeoRegion</code>.</p><div class="admonition is-info"><header class="admonition-header">Point Type</header><div class="admonition-body"><p>We use the <code>Point2</code> Type from the package GeometryBasics.jl, which is reexported by GeoRegions.jl, as an easy way to denote points.  This also allows us to use the package PolygonOps.jl to determine if a point is inside a region.</p></div></div><h3 id="Setup"><a class="docs-heading-anchor" href="#Setup">Setup</a><a id="Setup-1"></a><a class="docs-heading-anchor-permalink" href="#Setup" title="Permalink"></a></h3><pre><code class="language-julia hljs">using GeoRegions
using DelimitedFiles
using CairoMakie

download(&quot;https://raw.githubusercontent.com/natgeo-wong/GeoPlottingData/main/coastline_resl.txt&quot;,&quot;coast.cst&quot;)
coast = readdlm(&quot;coast.cst&quot;,comments=true)
clon  = coast[:,1]
clat  = coast[:,2]
nothing</code></pre><h2 id="Is-a-Point-in-a-GeoRegion?"><a class="docs-heading-anchor" href="#Is-a-Point-in-a-GeoRegion?">Is a Point in a GeoRegion?</a><a id="Is-a-Point-in-a-GeoRegion?-1"></a><a class="docs-heading-anchor-permalink" href="#Is-a-Point-in-a-GeoRegion?" title="Permalink"></a></h2><p>As an example, let us test if a point is in GeoRegion <code>AR6_EAO</code>, defined in the blue bounding box below.  We define the below points:</p><ul><li>Point <em>A</em> at coordinates (-20,5)</li><li>Point <em>B</em> at coordinates (340,5)</li><li>Point <em>C</em> at coordinates (30,15)</li></ul><pre><code class="language-julia hljs">A = Point2(-20,5)
B = Point2(340,5)
C = Point2(-45,-7.5)
geo = GeoRegion(&quot;AR6_EAO&quot;)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">The Polygonal Region AR6_EAO has the following properties:
    Region ID    (ID) : AR6_EAO
    Parent ID   (pID) : GLB
    Name       (name) : Equatorial Atlantic Ocean
    Bounds  (N,S,E,W) : [7.6, -10.0, 8.0, -50.0]
    Shape     (shape) : Point2{Float64}[[-34.0, -10.0], [-34.0, 0.0], [-50.0, 0.0], [-50.0, 7.6], [-20.0, 7.6], [8.0, 0.0], [8.0, -10.0], [-34.0, -10.0]]
        (is180,is360) : (true, false)
</code></pre><p>Here, we note that the coordinates of the GeoRegion (Equatorial Atlantic Ocean) are given in the bounds of (-180,180).  It is trivial in this case to calculate if points A and C are within the bounds of the GeoRegion.</p><pre><code class="language-julia hljs">_,_,slon,slat = coordGeoRegion(geo)
aspect = (maximum(slon)-minimum(slon))/(maximum(slat)-minimum(slat))
fig = Figure()
ax = Axis(
    fig[1,1],width=750,height=750/aspect,
    limits=(minimum(slon)-2,maximum(slon)+2,minimum(slat)-2,maximum(slat)+2)
)
lines!(ax,clon,clat,color=:black,linewidth=3)
lines!(ax,slon,slat,linewidth=5)
scatter!(ax,A,markersize=20)
scatter!(ax,C,markersize=20)
resize_to_layout!(fig)
fig</code></pre><img src="isin-461b6e24.svg" alt="Example block output"/><p>By eye it is easy to see that Point A is inside the GeoRegion.  However, C is not.  Let us now see if we are able to corroborate this with GeoRegions.jl using the function <code>isinGeoRegion()</code></p><pre><code class="language-julia hljs">(
    isinGeoRegion(A,geo,throw=false), # Point A
    isinGeoRegion(C,geo,throw=false) # Point C
)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">(true, false)</code></pre><p>But what about Point B?  Point B is also very obvious within the bounds of the GeoRegion, it is simply that the longitude of Point A is shifted by 360º such that it is now in the (0,360) coordinates frame.  We see that this is of no concern to GeoRegions.jl, which can detect that it is within the bounds of the GeoRegion anyway.</p><pre><code class="language-julia hljs">isinGeoRegion(B,geo,throw=false)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">true</code></pre><h2 id="Is-a-GeoRegion-inside-a-GeoRegion?"><a class="docs-heading-anchor" href="#Is-a-GeoRegion-inside-a-GeoRegion?">Is a GeoRegion inside a GeoRegion?</a><a id="Is-a-GeoRegion-inside-a-GeoRegion?-1"></a><a class="docs-heading-anchor-permalink" href="#Is-a-GeoRegion-inside-a-GeoRegion?" title="Permalink"></a></h2><p>Since any arbitrary geographic region can be defined as a <code>GeoRegion</code>, the natural extension now is to determine if a GeoRegion is wholly within another GeoRegion.</p><p>Let us consider an arbitrary GeoRegion <code>BIG</code>, and other smaller GeoRegions <code>TS1-4</code> as defined below, and plot them on a map.</p><pre><code class="language-julia hljs">geo_BIG = PolyRegion(
    &quot;BIG&quot;,&quot;GLB&quot;,&quot;A Big Region&quot;,
    [-120,-100,-100,-80,-30,15,45,75,90,115,120,105,85,45,20,-5,-45,-80,-120],
    [0,10,30,50,40,50,55,44,32,30,12,8,5,0,-10,-30,-40,-43,0]
)
geo_TS1 = RectRegion(&quot;TS1&quot;,&quot;GLB&quot;,&quot;Test Region 1&quot;,[45,20,20,-70])
geo_TS2 = PolyRegion(&quot;TS2&quot;,&quot;GLB&quot;,&quot;Test Region 2&quot;,[60,90,110,90,60],[20,25,20,15,20])
geo_TS3 = PolyRegion(
    &quot;TS3&quot;,&quot;GLB&quot;,&quot;Test Region 3&quot;,
    [-110,-98,-95,-90,-80,-100,-110,-110],
    [0,10,20,15,5,0,-20,0]
)
geo_TS4 = PolyRegion(
    &quot;TS4&quot;,&quot;GLB&quot;,&quot;Test Region 4&quot;,
    [300,325,330,355,330,325,320,300],
    [-10,-5,0,-10,-30,-35,-20,-10]
)

blon_b,blat_b,slon_b,slat_b = coordGeoRegion(geo_BIG)
              slon_1,slat_1 = coordGeoRegion(geo_TS1)
blon_2,blat_2,slon_2,slat_2 = coordGeoRegion(geo_TS2)
blon_3,blat_3,slon_3,slat_3 = coordGeoRegion(geo_TS3)
blon_4,blat_4,slon_4,slat_4 = coordGeoRegion(geo_TS4)

fig = Figure()

ax = Axis(
    fig[1,1],width=750,height=750/2,
    limits=(-180,180,-90,90)
)

lines!(ax,clon,clat,color=:black,linewidth=3)
lines!(ax,blon_b,blat_b,linewidth=5,color=:blue,linestyle=:dot)
lines!(ax,slon_b,slat_b,linewidth=5,color=:blue)
lines!(ax,slon_1,slat_1,linewidth=5,color=:red)
lines!(ax,blon_2,blat_2,linewidth=5,color=:green,linestyle=:dot)
lines!(ax,slon_2,slat_2,linewidth=5,color=:green)
lines!(ax,blon_3,blat_3,linewidth=5,color=:red,linestyle=:dot)
lines!(ax,slon_3,slat_3,linewidth=5,color=:red)
lines!(ax,blon_4.-360,blat_4,linewidth=5,color=:green,linestyle=:dot)
lines!(ax,slon_4.-360,slat_4,linewidth=5,color=:green)

resize_to_layout!(fig)
fig</code></pre><img src="isin-28786a7e.svg" alt="Example block output"/><p>We see by eye that GeoRegion <code>TS2</code> and <code>TS4</code> are in the <code>BIG</code> region, but the other GeoRegions are not.  Now let us verify this with <code>isinGeoRegion()</code></p><pre><code class="language-julia hljs">(
    isinGeoRegion(geo_TS1,geo_BIG,throw=false),
    isinGeoRegion(geo_TS2,geo_BIG,throw=false),
    isinGeoRegion(geo_TS3,geo_BIG,throw=false),
    isinGeoRegion(geo_TS4,geo_BIG,throw=false)
)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">(false, true, false, true)</code></pre><p>And we see that this is indeed the case.</p><h2 id="API"><a class="docs-heading-anchor" href="#API">API</a><a id="API-1"></a><a class="docs-heading-anchor-permalink" href="#API" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.in-Tuple{Point2{&lt;:Real}, RectRegion}" href="#Base.in-Tuple{Point2{&lt;:Real}, RectRegion}"><code>Base.in</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">in(
    Point  :: Point2{&lt;:Real},
    geo    :: GeoRegion;
    tlon   :: Real = 0,
    tlat   :: Real = 0,
    throw  :: Bool = true
) -&gt; Bool</code></pre><p>Check if a geographical point <code>point</code> is within a GeoRegion defined by <code>geo</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/GeoRegions.jl/blob/235287155bad91765810de0a26a9badf7b47e08b/src/isin/isingeoregion.jl#L10-L20">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.in-Tuple{GeoRegion, RectRegion}" href="#Base.in-Tuple{GeoRegion, RectRegion}"><code>Base.in</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">in(
    Child  :: GeoRegion,
    rectG  :: RectRegion;
    throw  :: Bool = true
) -&gt; Bool</code></pre><p>Check if a child GeoRegion defined by <code>Child</code> is within a RectRegion <code>rectG</code>.</p><p><strong>Arguments</strong></p><ul><li><code>Child</code> : A GeoRegion that we postulate to be a &quot;child&quot;, or a subset of the GeoRegion defined by <code>polyG</code></li><li><code>polyG</code> : A GeoRegion that we postulate to be a &quot;parent&quot;, or containing the GeoRegion defined by <code>Child</code></li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>throw</code>  : If <code>true</code>, then if <code>Child</code> is not within <code>polyG</code>, an error is thrown and the program stops running</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/GeoRegions.jl/blob/235287155bad91765810de0a26a9badf7b47e08b/src/isin/isingeoregion.jl#L58-L77">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.in-Tuple{GeoRegion, PolyRegion}" href="#Base.in-Tuple{GeoRegion, PolyRegion}"><code>Base.in</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">in(
    Child  :: GeoRegion,
    polyG  :: PolyRegion;
    domask :: Bool = false,
    throw  :: Bool = true
) -&gt; Bool</code></pre><p>Check if a child GeoRegion defined by <code>Child</code> is within a PolyRegion <code>polyG</code>.</p><p><strong>Arguments</strong></p><ul><li><code>Child</code> : A GeoRegion that we postulate to be a &quot;child&quot;, or a subset of the GeoRegion defined by <code>polyG</code></li><li><code>polyG</code> : A GeoRegion that we postulate to be a &quot;parent&quot;, or containing the GeoRegion defined by <code>Child</code></li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>throw</code>  : If <code>true</code>, then if <code>Child</code> is not within <code>polyG</code>, an error is thrown and the program stops running</li><li><code>domask</code> : If <code>throw</code> is <code>false</code> and <code>domask</code> is <code>true</code>, return a mask (with bounds defined by the <code>Child</code> GeoRegion) showing the region where <code>Child</code> and <code>polyG</code> do not overlap</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/GeoRegions.jl/blob/235287155bad91765810de0a26a9badf7b47e08b/src/isin/isingeoregion.jl#L29-L50">source</a></section></article><pre><code class="language-julia hljs">removeGeoRegion(&quot;BIG&quot;)
removeGeoRegion(&quot;TS1&quot;)
removeGeoRegion(&quot;TS2&quot;)
removeGeoRegion(&quot;TS3&quot;)
removeGeoRegion(&quot;TS4&quot;)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">[ Info: 2024-02-16T04:29:50.797 - GeoRegions.jl - Removing the GeoRegion BIG ...
[ Info: 2024-02-16T04:29:50.951 - GeoRegions.jl - Removing the GeoRegion TS1 ...
[ Info: 2024-02-16T04:29:50.953 - GeoRegions.jl - Removing the GeoRegion TS2 ...
[ Info: 2024-02-16T04:29:50.954 - GeoRegions.jl - Removing the GeoRegion TS3 ...
[ Info: 2024-02-16T04:29:50.955 - GeoRegions.jl - Removing the GeoRegion TS4 ...</code></pre><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../regiongrids/create.html">« Creating RegionGrids</a><a class="docs-footer-nextpage" href="custom.html">Custom GeoRegions »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.2.1 on <span class="colophon-date" title="Friday 16 February 2024 04:30">Friday 16 February 2024</span>. Using Julia version 1.10.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
